## Workflow Manager

### Weighted agent selection (Clifton-Strength-style)

The `WorkflowManager` can distribute work according to **agent weights** – a
lightweight mechanism for reflecting skill scores such as CliftonStrengths® or
internal performance KPIs.

1. **Attach a weight when registering an agent**

   ```python
   strength_score = 8.7  # your computed score (any positive float)
   await agent_registry.register_agent(
       agent,
       await agent.get_capabilities(),
       metadata={"weight": strength_score},  # <- critical line
   )
   ```

   If no weight is provided, the default is `1`.

2. **Create a workflow with the `weighted` strategy**

   ```python
   wf_id = await workflow_manager.create_workflow(
       name="Data-Enrichment",
       description="Enrich raw sensor data and publish insights",
       required_capabilities={"data_processing", "research"},
       load_balancing_strategy="weighted",  # <- activates weighting
   )
   ```

3. **How it works under the hood**

   • For each step the manager asks the `AgentRegistry` for all agents that
     advertise the required capability.
   • When `load_balancing_strategy == "weighted"` it calls
     `random.choices(agents, weights=[agent.metadata.get("weight", 1), …])` so
     the probability of an agent being chosen is proportional to its weight.

   This means a worker with weight **10** is ten times more likely to receive a
   task than a peer with weight **1**.

> **Tip:** You can map CliftonStrengths® "raw scores" (1-34) directly to
> `weight`, or normalise them to a 0-1 scale – the mechanism treats them
> purely as relative values.

4. **Fallback behaviour**

   • Strategies `round_robin` (default) and `random` ignore the `weight` field.
   • If you request `weighted` but none of the candidate agents define
     `metadata["weight"]`, selection is equivalent to uniform random.

This feature is fully covered by unit-tests (`tests/test_workflow_manager.py`) –
no runtime configuration is needed beyond the single `metadata` field and the
`weighted` strategy flag. 